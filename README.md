# ZIP-Image-Converter: WebP/AVIF 批量转换工具  
一个适用于 Windows 平台的图形化工具，对图片或漫画使用zip压缩包通过本工具，实现 **ZIP 解压 → 图片格式转换 → 重新压缩打包为zip** 全流程自动化，支持 WebP/AVIF 两种高效压缩格式。

源于对「Windows 下批量处理 ZIP 内图片格式」的实际需求：  
工具完成“解压 → 格式转换 → 重新压缩”三步操作，通过 Python 实现全流程自动化。


## 核心功能  
| 功能亮点                | 解决的问题                                                                 |
|-------------------------|--------------------------------------------------------------------------|
| 双格式支持              | 支持 WebP（兼容性强、转换速度快）和 AVIF（压缩率更高，比 WebP 小 20%-30%） |
| 全流程自动化            | 无需手动干预，一键完成「ZIP 输入 → 解压 → 格式转换 → ZIP 输出」全链路      |
| 中途取消功能            | 支持转换过程中随时终止，自动清理临时文件，避免冗余残留                     |
| 便携 EXE 输出           | 可打包为单文件 EXE，无需安装 Python 环境，拷贝即可在任意 Windows 电脑运行  |


## 环境准备  
### 1. Python 版本要求  
- Python 3.7 及以上（推荐 3.9+，兼容性更优）


### 2. 安装依赖  
通过 `pip` 安装工具运行与打包所需依赖，其中 `pillow-avif-plugin` 是 AVIF 格式转换的核心插件：  
```bash
# 升级 Pillow（确保基础格式转换支持）
pip install --upgrade pillow

# 安装 AVIF 格式支持插件（关键依赖）
pip install pillow-avif-plugin

# 安装打包工具（用于生成便携 EXE）
pip install pyinstaller
```


## 使用步骤  
### 方式 1：直接运行源码  
1. 下载项目源码，获取核心文件（如 `img_converter.py`）；  
2. 打开命令行，进入源码所在目录，执行以下命令启动工具：  
   ```bash
   python img_converter.py
   ```  
3. 图形界面操作流程：  
   - 选择输入 ZIP：点击「浏览」选择内含 JPG/PNG 的 ZIP 文件；  
   - 选择输出 ZIP：自动生成默认路径（原文件目录 + `_webp`/`_avif` 后缀），可手动修改；  
   - 选择转换格式：下拉框选择「WebP」或「AVIF」；  
   - 设置压缩质量：输入 1-100 的整数（推荐 WebP 70-80，AVIF 60-70）；  
   - 开始转换：点击「开始转换」，进度条实时显示进度，状态框提示当前处理文件；  
   - 中途取消：点击「取消」可终止转换，工具自动清理临时文件。


### 方式 2：使用便携 EXE（推荐）  
若需在无 Python 环境的电脑上使用，可将源码打包为单文件 EXE，或下载Releases中打包好的文件，步骤如下：  

#### 打包命令  
在源码目录执行以下命令，生成名为 `ImgConverter.exe` 的便携文件：  
```bash
pyinstaller --onefile --windowed --name "ImgConverter" --hidden-import="pillow_avif_plugin" img_converter.py
```  

#### 命令参数说明  
| 参数                     | 作用                                                                 |
|--------------------------|----------------------------------------------------------------------|
| `--onefile`              | 将所有依赖（代码、库、插件）打包成 **单个 EXE 文件**，便携性拉满       |
| `--windowed`             | 运行 EXE 时不显示命令行黑窗口，纯图形界面交互，体验更友好             |
| `--name "ImgConverter"`  | 自定义 EXE 文件名，避免默认的“代码文件名.exe”，更易识别               |
| `--hidden-import`        | 强制打包 AVIF 插件（关键！避免打包后 AVIF 转换功能失效）              |

#### 获取 EXE 文件  
打包完成后，EXE 文件会生成在源码目录下的 `dist` 文件夹中，直接拷贝该文件即可使用，无需其他依赖。
